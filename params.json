{"name":"Gempak","tagline":"Analysis, display, and product generation package for meteorological data.","body":"# GEMPAK\r\n\r\nThis document is intended to guide the user through the process of downloading, configuring and installing GEMPAK v7 for most common systems (32 and 64-bit Linux and Solaris). Specific instructions for <a href=\"http://www.unidata.ucar.edu/software/gempak/doc/install_osx.html\">building on OS X</a> are available as well.\r\n\r\nLast Updated January 2014\r\n\r\n## Download\r\n\r\nGEMPAK can be installed by an individual user, and root / superuser permission is not required. It's assumed for this guide and throughout other online documentation that GEMPAK is installed for a gempak user account in the home directory.\r\n\r\n### from GitHub\r\n\r\nGEMPAK may be download from the <a href=\"https://github.com/Unidata/gempak\"\">GitHub repository</a> in a zip file, or via `git` on the command line.\r\n\r\nIn **/home/gempak**, to clone into the directory **/home/gempak/GEMPAK7**:\r\n\r\n        git clone git://github.com/Unidata/gempak.git GEMPAK7\r\n\r\nThis will copy the GEMPAK source to the present working directory.   It also has the advantage of easily setting up <code>git pull</code> to automatically update your local GEMPAK7 repository with the remote Unidata repository.\r\n\r\nIf downloaded from GitHub, ensure that the source is located in a directory under the user's home directory, such as **/home/gempak/GEMPAK7/**\r\n\r\n### Source code from Unidata\r\n\r\nThe current release of GEMPAK is provided as a gzip/tarball archive and can found on the <a href=\"http://www.unidata.ucar.edu/downloads/gempak/\">Unidata GEMPAK download page</a>. \r\n\t\r\nUnpacking the archive in the gempak user home directory (assuming **/home/gempak**):\r\n\r\n\ttar -xvzf gempak-7.tar.gz\r\n\r\nwill create the directory **/home/gempak/GEMPAK7/** which contains all of the libraries, program source and configuration files, most notably the two Gemenviron and Gemenviron.profile.\r\n\r\n### Binary Releases\r\n\r\n| System   | compilers                           | flavor     |\r\n|---------:|:-----------------------------------|:-----------|\r\n| linux    | gcc-gfortran-4.1.2                  | CentOS 5   |\r\n| linux64  | gcc-gfortran-4.4.4                  | Fedora 12  |\r\n| x86      | Sun Fortran 95 8.6 and Sun C 5.12   | SunOs 5.11 |\r\n| Darwin   | clang/LLVM 5 and gfortran/gcc 4.7.2 | OS X 10.9 Mavericks |\r\n\r\nThe OS X 10.9 binary required **MacPorts** and package `openmotif` be installed:\r\n\t\r\n1. Download and install MacPorts\r\n2. run `sudo port install openmotif` to install Open Motif and its dependencies.\r\n3. run `nmap2` to make sure Motif libraries are installed.\r\n\r\n## Create the NAWIPS symbolic link\r\n\r\nAfter installing or building from source, but before running any GEMAPK programs, you should create a symbolic link NAWIPS in your home directory to maintain a single command in **.cshrc** or **.profile** that sources the current GEMPAK installation:\r\n\r\n\tln -s GEMPAK7/ NAWIPS\r\n\t\r\nYour **gempak** home directory should then contain the following:\r\n\r\n\t/home/gempak/GEMPAK7\r\n\t/home/gempak/NAWIPS -> GEMPAK7\r\n\r\nIf you unpacked and plan to install GEMPAK in an uncommon directory (such as **/opt/gempak/**), you'll need to edit the NAWIPS definition at the top of the appropriate Gemenviron file.\r\n\r\n## Gemenviron / Gemenviron.profile\r\n\r\nTo build GEMPAK on your system, the environmental variable **$NAWIPS** must be defined at the top of **Gemenviron** [ for csh/tcsh ] or **Gemenviron.profile** [ for bash/ksh ]. These files contain definitions for the locations of various components used by GEMPAK. It is the responsibility of the GEMPAK administrator to confirm that **$NAWIPS** is defined correctly with the full path of the `GEMPAK7` directory. Other variables which point to the location of data directories, tables and can be tailored at your lesiure, but it's recommended that only **$NAWIPS** be modified as all other variables related to GEMPAK are dependant on **$NAWIPS**.\r\n\r\nIf you unpacked GEMPAK in **/home/gempak** and plan on compiling with gfortran, you can skip this step.\r\n\r\n\r\n\tsetenv NAWIPS /home/gempak/GEMPAK7\r\n\r\n## Sourcing Environmental Variables\r\n\r\n### csh/tcsh\r\n\r\nsource the full path of Gemenviron in your .cshrc\r\n\r\n\tsource /home/gempak/NAWIPS/Gemenviron\r\n\r\n### bash\r\n\r\nadd the following to .profile\r\n\r\n\t. /home/gempak/NAWIPS/Gemenviron.profile\r\n\r\nImportant environmental variable to be familiar with are:\r\n\r\n\t$NAWIPS as defined above\r\n\t$GEMPAK points to $NAWIPS/gempak\r\n\t$GEMTBL points to $GEMPAK/tables\r\n\t$OS_BIN points to $GEMPAK/os/$NA_OS/bin\r\n\t$OS_LIB points to $GEMPAK/os/$NA_OS/lib\r\n\t$GEMMAPS points to $GEMPAK/maps\r\n\t$GEMDATA points to /data/ldm/gempak\r\n\t$NA_OS is determined by Gemenviron (linux, linux64, x86, SunOS, Darwin, etc. )\r\n\r\nThe last definition, **$GEMDATA**, points to the **/data/ldm/gempak** but can be changed depending on how you <a href=\"http://www.unidata.ucar.edu/software/gempak/doc/configuration.html\">install and configure the LDM</a>.\r\n\r\n## Required Libraries\r\n\r\nIf your system uses standard locations for its compilers, X11/Motif libraries and make utilities, you do not needto change any settings. It's assumed both an ansi compatible C compiler and a Fortran 77 compatible compiler are available.\r\n\r\nTo build locally from source, you must have the developer environments installed for X11, Open Motif and libXp.\r\n\r\n### X11\r\n\r\n* libX11\r\n* libX11-devel\r\n\r\n### Open Motif\r\n\r\n* openmotif\r\n* openmotif-devel\r\n\r\nThe Open Motif 2.3.4 source tarball can be downloaded from the <a href=\"http://sourceforge.net/projects/motif/files/\">motif sourceforge page</a>.\r\n\r\nBinary packages are also available for <a href=\"http://sourceforge.net/projects/motif/files/\">Red Hat, Fedora and Ubuntu</a> operating systems.\r\n\r\nSome operating systems provide the MOTIF libraries, but some only install them as an option. \r\n### libXp\r\n\r\n* libXp\r\n* libXp-devel\r\n\r\n### Full List of Required Libraries\r\n\r\nSome systems, most notably recent releases of Fedora Core (fc16 and fc17) require a number of packages be installed in order to successfully build OpenMotif and GEMPAK. Below is a list of all required packages, followed by a single yum install command to take care of them in one instance: \r\n\r\n* gcc\r\n* gcc-c++\r\n* gcc-gfortran\r\n* libX11\r\n* libX11-devel\r\n* libXt-devel\r\n* libXext-devel\r\n* libXp\r\n* libXp-devel\r\n* libXft-devel\r\n* libXtst-devel\r\n* xorg-x11-xbitmaps\r\n* flex\r\n* byacc\r\n* \\*fonts-ISO8859-\\*\r\n\r\nTo install all at once: \r\n\r\n\tyum install gcc gcc-c++ gcc-gfortran libX11 libX11-devel libXt-devel \\\r\n\tlibXext-devel libXp libXp-devel libXft-devel libXtst-devel \\\r\n\txorg-x11-xbitmaps flex byacc *fonts-ISO8859-* -y\r\n\r\n## Build Options\r\n\r\n### Gemenviron / Gemenviron.profile\r\n\r\nTo change the GCC compiler, edit the **USE_GFORTRAN**, **USE_PGI** and **USE_G77** definitions in **Gemenviron** or **Gemenviron.profile** (**gfortran** is the default):\r\n\r\n\tset USE_GFORTRAN=1\r\n\r\n## Makeinc.common\r\n\r\nFor most systems, GEMPAK will be built using either g77 or gfortran[4.1+]. Files located in **$NAWIPS/config/** contain information specific to the individual platform you will be installing on (sol, x86, hpux, linux, osf, irix, aix, freebsd, darwin).\r\n\r\n### SunOS-Specific Options\r\n\r\nBundled cc is not ansi compatible, so SunOS users should make sure SUNWspro/bin/cc is found before **/usr/ucb/cc** in your path. Also, you will need to ensure that /usr/ccs/bin is in your path.\r\n\r\n### Ubuntu Linux\r\n\r\nUbuntu builds require the compiler flag `-fno-stack-protector` be added to **COPT** (C compiler options) and FOPT (fortran compiler options). Ubuntu-specific Makeinc files are provided in **$NAWIPS/config/** that include this compiler flag:\r\n\r\n\t$NAWIPS/config/Makeinc.linux_gfortran_ubuntu\r\n\t$NAWIPS/config/Makeinc.linux64_gfortran_ubuntu\r\n\r\n### Mac OS X\r\n\r\n<a href=\"http://www.unidata.ucar.edu/software/gempak/doc/install_osx.html\">Mac OS X GEMPAK Installation Guide</a> by Kevin Tyle, University of Albany.\r\n\r\nThis document will guide users through building GEMPAK on Intel Mac OS X 10.6 (Snow Leopard) with GCC 4.4 compilers. The same procedure should also work for 10.5 (Leopard), but earlier versions/CPU's of OS X remain untested.\r\n\r\n## Compiling GEMPAK Source\r\n\r\n### Make\r\n\r\nGEMPAK and various bundled libearies are compiled from source by the Make tool, using the Fortran and C compilers specified in the above configuration files. From $NAWIPS issue the command\r\n\r\n\tmake all >& make.out\r\n\r\nThe redirection command `>&` sends **STDOUT** to the log file make.out. The Make process takes several minutes to complete, first compiling libraries such as netCDF, ncepBUFR, HDF5 and zlib, followed by the GEMPAK source. In another terminal you can follow the STDOUT log with the command\r\n\r\n\ttail -f make.out\r\n\r\nor attach an ampersand to send make to the background and tail the log instantly\r\n\r\n\tmake all >& make.out & tail -f make.out\r\n\r\nThis process allows you to examine the build as it runs but preserves the output in the event something goes horribly wrong. If seeking help from Unidata, attach some or all of this make.out log. One should note that with the Makefile installation, only fatal errors (errors that cause the build to end prematurely) are significant, and most \"warnings\" can be ignored.\r\n\r\n## Install & Clean\r\n\r\n\tmake install; make clean\r\n\r\nExecutables are installed to **$OS_BIN** and libraries should already be located in **$OS_LIB**.\r\n\r\nThe command make clean will remove compiled objects and binary executables from the source tree.\r\n\r\nIf your distribution is modified by patches or other edits and updates and you have to rebuild, the compilation time will be reduced as the libraries which took the majority of the time to build already exist.\r\n\r\n## Cleaning a Build\r\n\r\nIn the event that core definitions change and libraries must be built from scratch, a the entire install for your system will need to be cleaned:\r\n\r\n\tmake distclean\r\n\r\nThis full clean will delete all objects and executables as well as all libraries built for the current system.\r\n\r\n### Everything\r\n\r\n\tmake everything\r\n\r\nThis command will combine the steps of make all, make install and make clean to build and install the package, but will not log **STDOUT** to file. The command also runs the `make programs_nc` and `make programs_gf` targets mentioned below.\r\n\r\n### GF & NC Programs\r\n\r\n\tmake programs_nc\r\n\r\nand\r\n\r\n\tmake programs_gf\r\n\r\nbuild versions of programs which link directly to device drivers (eliminating the gplt/message queue interface). These are primarily used for projects where multiple scripts are run at scheduled times, as in the cron, and don't require user interaction.\r\n\r\nEverything Okay? Continue on to <a href=\"http://www.unidata.ucar.edu/software/gempak/doc/configuration.html\">LDM & GEMPAK Setup</a>\r\n\r\n## Troubleshooting\r\n\r\n### Missing MOTIF Libraries\r\n\r\nAny error messages involving missing Xm files (such as Xm/XmAll.h):\r\n\r\n<pre>\r\n> ...include/geminc.h:59:22: Xm/XmAll.h: No such file or directory\r\n> In file included from /home/gempak/GEMPAK7/include/proto.h:28,\r\n>    from /home/gempak/GEMPAK7/include/gemprm.h:647,\r\n</pre>\r\n\r\nIndicate that openmotif and openmotif-devel were not found on your system. Either the motif libraries are not installed on your system, or the correct location has not been specified to the compiler. If the latter is the case, you will need to edit **$NAWIPS/config/Makeinc.linux_gfortran** (assuming a linux system using gfortran), where $NA_OS is your system architecture as determined in the Gemenviron configuration file.\r\n\r\n### Incorrectly sourced Gemenviron/Gemenviron.profile\r\n\r\nThe runtime error\r\n\r\n<pre>\r\n> [GEMPLT -101]  NOPROC - Nonexistent executable\r\n</pre>\r\n\r\nindicates that your environmental variables are not sourced correctly (type command `env` to see all envars and make sure the Gemenviron configuration file is edited and sourced as described above).\r\n\r\n### Error in message queue\r\n\r\n<pre>\r\n> Error in message send = 22\r\n> itype, ichan, nwords,0,65536,3\r\n</pre>\r\n\r\nThis runtime error means the message queue is full, which typically occurs when executing GEMPAK programs in batch mode from scripts. To fix, exit GEMPAK and run\r\n\r\n\tcleanup -c\r\n\r\nThis command will remove existing message queues (the **ipcrm** command is run to remove message queues found with **ipcs**). It will also look for running **gplt** processes and kill them.\r\n\r\n## Legal Disclaimer\r\n\r\nGEMPAK was developed by the National Aeronautics and Space\r\nAdministration and the National Oceanic and Atmospheric Administration.\r\nGEMPAK is provided by UCAR on an \"AS IS\" basis and any warranties,\r\neither express or implied, including but not limited to implied\r\nwarranties of noninfringement, originality, merchantability and fitness\r\nfor a particular purpose, are disclaimed. UCAR will not be obligated to\r\nprovide the user with any support, consulting, training or assistance of\r\nany kind with regard to the use, operation and performance of GEMPAK nor\r\nto provide the user with any updates, revisions, new versions, error\r\ncorrections or \"bug\" fixes. In no event will UCAR be liable for any damages,\r\nwhatsoever, whether direct, indirect, consequential or special, which may\r\nresult from an action in contract, negligence or other claim that arises\r\nout of or in connection with the access, use or performance of GEMPAK\r\nincluding infringement actions.\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}